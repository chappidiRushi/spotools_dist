import{a as nt}from"./chunk-5Z6JN7AJ.js";import{a as at,b as ot,c as lt,d as he,e as fe,f as _e,g as st,h as rt,k as ye,l as be,m as dt,n as pt,o as ct}from"./chunk-IFS63E7T.js";import{b as Je,c as Be,d as ue}from"./chunk-P73Z4VH2.js";import{$ as tt,C as ce,E as me,F as D,G as q,K as $e,L as Ee,N as Me,P as Le,Q as Ve,S as De,Y as R,_ as et,b as qe,d as re,f as de,g as pe,h as Ke,i as A,r as Ye,y as z}from"./chunk-MXG7DDQU.js";import{Ab as Te,Bb as Pe,Cb as He,Db as U,Eb as X,Fb as Z,Gb as m,Hb as ne,Ib as E,Kb as S,Lb as w,Mb as x,Na as Se,Nb as ae,Ob as W,Qb as oe,Ra as r,Rb as Ue,Sa as k,Sb as Ie,Tb as Xe,V as Ae,Vb as Ze,W as Re,Wa as Qe,X as B,_b as ze,aa as V,bb as $,ea as P,fa as F,fb as _,fc as le,g as I,gb as b,h as We,hb as p,jc as M,kc as se,lb as N,mb as O,na as h,nb as ee,oa as f,ob as te,pb as ie,pc as Fe,qb as l,qc as it,rb as s,sa as Ge,sb as T,tb as we,ua as ve,ub as xe,va as C,vb as j,wb as v,xb as y,yb as c,zb as ke}from"./chunk-SZ3PCPDW.js";var mt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=B({imports:[A,q]})}return t})();var gt=["*"],Ct=(t,o,e,i,n,a)=>({"p-sidebar":!0,"p-sidebar-active":t,"p-sidebar-left":o,"p-sidebar-right":e,"p-sidebar-top":i,"p-sidebar-bottom":n,"p-sidebar-full":a}),vt=(t,o)=>({transform:t,transition:o}),St=t=>({value:"visible",params:t});function wt(t,o){t&1&&j(0)}function xt(t,o){if(t&1&&(we(0),_(1,wt,1,0,"ng-container",5),xe()),t&2){let e=c(2);r(),p("ngTemplateOutlet",e.headlessTemplate)}}function kt(t,o){t&1&&j(0)}function Tt(t,o){t&1&&T(0,"TimesIcon",13),t&2&&(p("styleClass","p-sidebar-close-icon"),b("data-pc-section","closeicon"))}function Pt(t,o){}function It(t,o){t&1&&_(0,Pt,0,0,"ng-template")}function Et(t,o){if(t&1&&(l(0,"span",14),_(1,It,1,0,null,5),s()),t&2){let e=c(4);b("data-pc-section","closeicon"),r(),p("ngTemplateOutlet",e.closeIconTemplate)}}function Mt(t,o){if(t&1){let e=v();l(0,"button",10),y("click",function(n){h(e);let a=c(3);return f(a.close(n))})("keydown.enter",function(n){h(e);let a=c(3);return f(a.close(n))}),_(1,Tt,1,2,"TimesIcon",11)(2,Et,2,2,"span",12),s()}if(t&2){let e=c(3);b("aria-label",e.ariaCloseLabel)("data-pc-section","closebutton")("data-pc-group-section","iconcontainer"),r(),p("ngIf",!e.closeIconTemplate),r(),p("ngIf",e.closeIconTemplate)}}function Lt(t,o){t&1&&j(0)}function Vt(t,o){t&1&&j(0)}function Dt(t,o){if(t&1&&(we(0),l(1,"div",15),_(2,Vt,1,0,"ng-container",5),s(),xe()),t&2){let e=c(3);r(),b("data-pc-section","footer"),r(),p("ngTemplateOutlet",e.footerTemplate)}}function Bt(t,o){if(t&1&&(l(0,"div",6),_(1,kt,1,0,"ng-container",5)(2,Mt,3,5,"button",7),s(),l(3,"div",8),Te(4),_(5,Lt,1,0,"ng-container",5),s(),_(6,Dt,3,2,"ng-container",9)),t&2){let e=c(2);b("data-pc-section","header"),r(),p("ngTemplateOutlet",e.headerTemplate),r(),p("ngIf",e.showCloseIcon),r(),b("data-pc-section","content"),r(2),p("ngTemplateOutlet",e.contentTemplate),r(),p("ngIf",e.footerTemplate)}}function Ft(t,o){if(t&1){let e=v();l(0,"div",3,0),y("@panelState.start",function(n){h(e);let a=c();return f(a.onAnimationStart(n))})("@panelState.done",function(n){h(e);let a=c();return f(a.onAnimationEnd(n))})("keydown",function(n){h(e);let a=c();return f(a.onKeyDown(n))}),_(2,xt,2,1,"ng-container",4)(3,Bt,7,6,"ng-template",null,1,ze),s()}if(t&2){let e=Z(4),i=c();N(i.styleClass),p("ngClass",Ze(9,Ct,i.visible,i.position==="left"&&!i.fullScreen,i.position==="right"&&!i.fullScreen,i.position==="top"&&!i.fullScreen,i.position==="bottom"&&!i.fullScreen,i.fullScreen))("@panelState",oe(19,St,Ue(16,vt,i.transformOptions,i.transitionOptions)))("ngStyle",i.style),b("data-pc-name","sidebar")("data-pc-section","root"),r(2),p("ngIf",i.headlessTemplate)("ngIfElse",e)}}var Nt=Ve([Me({transform:"{{transform}}",opacity:0}),Ee("{{transition}}")]),Ot=Ve([Ee("{{transition}}",Me({transform:"{{transform}}",opacity:0}))]),G=(()=>{class t{document;el;renderer;cd;config;appendTo;blockScroll=!1;style;styleClass;ariaCloseLabel;autoZIndex=!0;baseZIndex=0;modal=!0;dismissible=!0;showCloseIcon=!0;closeOnEscape=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";get visible(){return this._visible}set visible(e){this._visible=e}get position(){return this._position}set position(e){switch(this._position=e,e){case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break}}get fullScreen(){return this._fullScreen}set fullScreen(e){this._fullScreen=e,e&&(this.transformOptions="none")}templates;onShow=new C;onHide=new C;visibleChange=new C;initialized;_visible;_position="left";_fullScreen=!1;container;transformOptions="translate3d(-100%, 0px, 0px)";mask;maskClickListener;documentEscapeListener;animationEndListener;contentTemplate;headerTemplate;footerTemplate;closeIconTemplate;headlessTemplate;constructor(e,i,n,a,u){this.document=e,this.el=i,this.renderer=n,this.cd=a,this.config=u}ngAfterViewInit(){this.initialized=!0}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"headless":this.headlessTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}onKeyDown(e){e.code==="Escape"&&this.hide(!1)}show(){this.autoZIndex&&z.set("modal",this.container,this.baseZIndex||this.config.zIndex.modal),this.modal&&this.enableModality(),this.onShow.emit({}),this.visibleChange.emit(!0)}hide(e=!0){e&&this.onHide.emit({}),this.modal&&this.disableModality()}close(e){this.hide(),this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.mask||(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(this.container.style.zIndex)-1)),R.addMultipleClasses(this.mask,"p-component-overlay p-sidebar-mask p-component-overlay p-component-overlay-enter"),this.dismissible&&(this.maskClickListener=this.renderer.listen(this.mask,"click",e=>{this.dismissible&&this.close(e)})),this.renderer.appendChild(this.document.body,this.mask),this.blockScroll&&R.blockBodyScroll())}disableModality(){this.mask&&(R.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyModal.bind(this)))}destroyModal(){this.unbindMaskClickListener(),this.mask&&this.renderer.removeChild(this.document.body,this.mask),this.blockScroll&&R.unblockBodyScroll(),this.unbindAnimationEndListener(),this.mask=null}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.appendContainer(),this.show(),this.closeOnEscape&&this.bindDocumentEscapeListener();break}}onAnimationEnd(e){switch(e.toState){case"void":this.hide(!1),z.clear(this.container),this.unbindGlobalListeners();break}}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):R.appendChild(this.container,this.appendTo))}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentEscapeListener=this.renderer.listen(e,"keydown",i=>{i.which==27&&parseInt(this.container.style.zIndex)===z.get(this.container)&&this.close(i)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindGlobalListeners(){this.unbindMaskClickListener(),this.unbindDocumentEscapeListener()}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}ngOnDestroy(){this.initialized=!1,this.visible&&this.modal&&this.destroyModal(),this.appendTo&&this.container&&this.renderer.appendChild(this.el.nativeElement,this.container),this.container&&this.autoZIndex&&z.clear(this.container),this.container=null,this.unbindGlobalListeners(),this.unbindAnimationEndListener()}static \u0275fac=function(i){return new(i||t)(k(qe),k(ve),k(Qe),k(le),k(me))};static \u0275cmp=P({type:t,selectors:[["p-sidebar"]],contentQueries:function(i,n,a){if(i&1&&Pe(a,D,4),i&2){let u;U(u=X())&&(n.templates=u)}},hostAttrs:[1,"p-element"],inputs:{appendTo:"appendTo",blockScroll:[2,"blockScroll","blockScroll",M],style:"style",styleClass:"styleClass",ariaCloseLabel:"ariaCloseLabel",autoZIndex:[2,"autoZIndex","autoZIndex",M],baseZIndex:[2,"baseZIndex","baseZIndex",se],modal:[2,"modal","modal",M],dismissible:[2,"dismissible","dismissible",M],showCloseIcon:[2,"showCloseIcon","showCloseIcon",M],closeOnEscape:[2,"closeOnEscape","closeOnEscape",M],transitionOptions:"transitionOptions",visible:"visible",position:"position",fullScreen:"fullScreen"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange"},features:[$],ngContentSelectors:gt,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["role","complementary",3,"ngClass","ngStyle","class","keydown",4,"ngIf"],["role","complementary",3,"keydown","ngClass","ngStyle"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"p-sidebar-header"],["type","button","class","p-sidebar-close p-sidebar-icon p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[1,"p-sidebar-content"],[4,"ngIf"],["type","button","pRipple","",1,"p-sidebar-close","p-sidebar-icon","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-sidebar-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-sidebar-close-icon"],[1,"p-sidebar-footer"]],template:function(i,n){i&1&&(ke(),_(0,Ft,5,21,"div",2)),i&2&&p("ngIf",n.visible)},dependencies:()=>[re,de,Ke,pe,et,Be],styles:[`@layer primeng{.p-sidebar{position:fixed;transition:transform .3s;display:flex;flex-direction:column}.p-sidebar-content{position:relative;overflow-y:auto;flex-grow:1}.p-sidebar-header{display:flex;align-items:center}.p-sidebar-footer{margin-top:auto}.p-sidebar-icon{display:flex;align-items:center;justify-content:center;margin-left:auto}.p-sidebar-left{top:0;left:0;width:20rem;height:100%}.p-sidebar-right{top:0;right:0;width:20rem;height:100%}.p-sidebar-top{top:0;left:0;width:100%;height:10rem}.p-sidebar-bottom{bottom:0;left:0;width:100%;height:10rem}.p-sidebar-full{width:100%;height:100%;top:0;left:0;-webkit-transition:none;transition:none}.p-sidebar-left.p-sidebar-sm,.p-sidebar-right.p-sidebar-sm{width:20rem}.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-md{width:40rem}.p-sidebar-left.p-sidebar-lg,.p-sidebar-right.p-sidebar-lg{width:60rem}.p-sidebar-top.p-sidebar-sm,.p-sidebar-bottom.p-sidebar-sm{height:10rem}.p-sidebar-top.p-sidebar-md,.p-sidebar-bottom.p-sidebar-md{height:20rem}.p-sidebar-top.p-sidebar-lg,.p-sidebar-bottom.p-sidebar-lg{height:30rem}@media screen and (max-width: 64em){.p-sidebar-left.p-sidebar-lg,.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-lg,.p-sidebar-right.p-sidebar-md{width:20rem}}}
`],encapsulation:2,data:{animation:[$e("panelState",[Le("void => visible",[De(Nt)]),Le("visible => void",[De(Ot)])])]},changeDetection:0})}return t})(),Q=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=B({imports:[A,tt,q,Be,q]})}return t})();var jt=["input"],Wt=(t,o,e,i)=>({"p-radiobutton p-component":!0,"p-radiobutton-checked":t,"p-radiobutton-disabled":o,"p-radiobutton-focused":e,"p-variant-filled":i}),At=(t,o,e)=>({"p-radiobutton-box":!0,"p-highlight":t,"p-disabled":o,"p-focus":e}),Rt=(t,o,e)=>({"p-radiobutton-label":!0,"p-radiobutton-label-active":t,"p-disabled":o,"p-radiobutton-label-focus":e});function Gt(t,o){if(t&1){let e=v();l(0,"label",7),y("click",function(n){h(e);let a=c();return f(a.select(n))}),m(1),s()}if(t&2){let e=c(),i=Z(3);N(e.labelStyleClass),p("ngClass",Ie(6,Rt,i.checked,e.disabled,e.focused)),b("for",e.inputId)("data-pc-section","label"),r(),ne(e.label)}}var Qt={provide:at,useExisting:Ae(()=>Y),multi:!0},Ht=(()=>{class t{accessors=[];add(e,i){this.accessors.push([e,i])}remove(e){this.accessors=this.accessors.filter(i=>i[1]!==e)}select(e){this.accessors.forEach(i=>{this.isSameGroup(i,e)&&i[1]!==e&&i[1].writeValue(e.value)})}isSameGroup(e,i){return e[0].control?e[0].control.root===i.control.control.root&&e[1].name===i.name:!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Y=(()=>{class t{cd;injector;registry;config;value;formControlName;name;disabled;label;variant="outlined";tabindex;inputId;ariaLabelledBy;ariaLabel;style;styleClass;labelStyleClass;autofocus;onClick=new C;onFocus=new C;onBlur=new C;inputViewChild;onModelChange=()=>{};onModelTouched=()=>{};checked;focused;control;constructor(e,i,n,a){this.cd=e,this.injector=i,this.registry=n,this.config=a}ngOnInit(){this.control=this.injector.get(lt),this.checkName(),this.registry.add(this.control,this)}handleClick(e,i,n){e.preventDefault(),!this.disabled&&(this.select(e),n&&i.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit({originalEvent:e,value:this.value}))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error(`
          If you define both a name and a formControlName attribute on your radio button, their values
          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>
        `)}static \u0275fac=function(i){return new(i||t)(k(le),k(Ge),k(Ht),k(me))};static \u0275cmp=P({type:t,selectors:[["p-radioButton"]],viewQuery:function(i,n){if(i&1&&He(jt,5),i&2){let a;U(a=X())&&(n.inputViewChild=a.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:[2,"disabled","disabled",M],label:"label",variant:"variant",tabindex:[2,"tabindex","tabindex",se],inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",autofocus:[2,"autofocus","autofocus",M]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[ae([Qt]),$],decls:7,vars:31,consts:[["input",""],[3,"click","ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio","pAutoFocus","",3,"focus","blur","checked","disabled","value","autofocus"],[3,"ngClass"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"],[3,"click","ngClass"]],template:function(i,n){if(i&1){let a=v();l(0,"div",1),y("click",function(d){h(a);let g=Z(3);return f(n.handleClick(d,g,!0))}),l(1,"div",2)(2,"input",3,0),y("focus",function(d){return h(a),f(n.onInputFocus(d))})("blur",function(d){return h(a),f(n.onInputBlur(d))}),s()(),l(4,"div",4),T(5,"span",5),s()(),_(6,Gt,2,10,"label",6)}i&2&&(N(n.styleClass),p("ngStyle",n.style)("ngClass",Xe(22,Wt,n.checked,n.disabled,n.focused,n.variant==="filled"||n.config.inputStyle()==="filled")),b("data-pc-name","radiobutton")("data-pc-section","root"),r(),b("data-pc-section","hiddenInputWrapper"),r(),p("checked",n.checked)("disabled",n.disabled)("value",n.value)("autofocus",n.autofocus),b("id",n.inputId)("name",n.name)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("tabindex",n.tabindex)("aria-checked",n.checked)("data-pc-section","hiddenInput"),r(2),p("ngClass",Ie(27,At,n.checked,n.disabled,n.focused)),b("data-pc-section","input"),r(),b("data-pc-section","icon"),r(),p("ngIf",n.label))},dependencies:[re,de,pe,st],encapsulation:2,changeDetection:0})}return t})(),ge=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=B({imports:[A,rt]})}return t})();function Zt(t,o){t&1&&(l(0,"div",9),m(1,"SPLIT PLAYLIST"),s(),T(2,"div"))}function zt(t,o){if(t&1){let e=v();l(0,"div",7)(1,"p-radioButton",10),x("ngModelChange",function(n){h(e);let a=c();return w(a.selectedGenre,n)||(a.selectedGenre=n),f(n)}),s(),l(2,"label",11)(3,"span",12),m(4),s(),l(5,"span",13),m(6),s()()()}if(t&2){let e=o.$implicit,i=c();r(),p("inputId",e.genre)("value",e.genre),S("ngModel",i.selectedGenre),r(),p("for",e.genre),r(2),ne(e.genre),r(2),E("(",e.items.length,")")}}function qt(t,o){t&1&&T(0,"div")}function Kt(t,o){if(t&1&&(T(0,"p-button",14),_(1,qt,1,0,"div")),t&2){let e=c();p("classList","fullWidthBtn")("disabled",!e.selectedGenre),r(),O(e.selectedGenre?1:-1)}}var ht=(()=>{let o=class o{constructor(){this.searchedText="",this.showSidebar=!0,this.showSidebarChange=new C,this.selectedGenre="",this.genreMap=[],this.spotify=V(ue)}searched(i){console.log("\u{1F680} ~ file: genre.component.ts:29 ~ GenreComponent ~ searched ~ $event:",i)}rendered(){console.log("rendered")}ngOnInit(){return I(this,null,function*(){if(!this.playlist.tracks?.total)throw new Error("there are no tracks available");let i={};(yield this.spotify.getAllPlaylistItems(this.playlist.id,this.playlist.tracks?.total)).forEach(g=>{g.track.artists.forEach(L=>{i[L.id]||(i[L.id]=[]),i[L.id].push(g.track.id)})});let a=yield this.spotify.getArtists(Object.keys(i)),u={};a.forEach(g=>{g.genres.forEach(L=>{let H=i[g.id];u[L]?u[L].push(...H):u[L]=[...H]})});let d=[];Object.keys(u).forEach(g=>{d.push({genre:g,items:it(u[g])})}),this.genreMap=d})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=P({type:o,selectors:[["app-genre"]],inputs:{playlist:"playlist",showSidebar:"showSidebar"},outputs:{showSidebarChange:"showSidebarChange"},standalone:!0,features:[ae([]),W],decls:11,vars:2,consts:[["styleClass","p-sidebar-md","title","Split Playlist","position","right",1,"no-sidebar-shadow",3,"visibleChange","onHide","visible"],["pTemplate","header"],[1,"px-5","h-full"],[1,"block","font-bold","text-gray-600","dark:text-gray-300","mt-4","mb-2"],[1,"card","flex","justify-content-center"],["type","text",3,"search","ngModelChange","ngModel"],[1,"pl-4"],[1,"cursor-pointer","hover:text-purple-600","flex","py-1"],["pTemplate","footer"],[1,"font-semibold","text-2xl"],["name","category",3,"ngModelChange","inputId","value","ngModel"],[1,"ml-2",3,"for"],[1,"text-2xl"],[1,"text-xl","text-gray-500","pl-3"],["label","Create Playlist","icon","pi pi-check",1,"text-2xl","w-full",3,"classList","disabled"]],template:function(n,a){n&1&&(l(0,"p-sidebar",0),x("visibleChange",function(d){return w(a.showSidebar,d)||(a.showSidebar=d),d}),y("onHide",function(){return a.showSidebarChange.emit(!1)}),_(1,Zt,3,0,"ng-template",1),l(2,"div",2)(3,"label",3),m(4," Available Genre :"),l(5,"div",4)(6,"input",5),y("search",function(d){return a.searched(d)}),x("ngModelChange",function(d){return w(a.searchedText,d)||(a.searchedText=d),d}),s()()(),l(7,"div",6),te(8,zt,7,6,"div",7,ee),s()(),_(10,Kt,2,3,"ng-template",8),s()),n&2&&(S("visible",a.showSidebar),r(6),S("ngModel",a.searchedText),r(2),ie(a.genreMap))},dependencies:[Q,G,D,ge,Y,_e,ot,he,fe,dt,be,ye],encapsulation:2});let t=o;return t})();function Yt(t,o){t&1&&(l(0,"div",17),m(1,"SPLIT PLAYLIST"),s())}var ft=(()=>{let o=class o{constructor(){this.userService=V(nt),this.toastService=V(ce),this.splitCount=1,this.loading=!1,this.showSplitPlaylistSidebar=!1,this.showSplitPlaylistSidebarChange=new C,this.exit=new C,this.splitMode="dividePlayListIntoXParts"}splitPlaylist(){return I(this,null,function*(){try{this.loading=!0;let d=this.playlist.tracks?.total||0;if(!d)throw new Error("No Tracks In playlist to Split");let g=yield this.userService.fetchAllTracks(this.playlist.id,d);if(this.splitMode==="dividePlayListIntoXParts"){let L=Math.ceil(d/this.splitCount),H=Fe(g,L);for(let J=0;J<H.length;J++){let je=yield this.userService.createPlaylist(`${this.playlist.name} - splitted #${J+1}`);if(!je)throw new Error("no new playlist");let _t=H[J].map(Ce=>Ce.track?.uri),yt=Fe(_t,100);try{for(var i=We(yt),n,a,u;n=!(a=yield i.next()).done;n=!1){let Ce=a.value;yield this.userService.addTracksToPlaylist(je.id,Ce)}}catch{u=[a]}finally{try{n&&(a=i.return)&&(yield a.call(i))}finally{if(u)throw u[0]}}}}this.toastService.add({severity:"success",summary:"Success",detail:"Playlist splitted successfully"}),this.exit.emit(),this.loading=!1}catch(d){let g="Failed To Split Playlist";d instanceof Error&&(g=d.message),console.error("creating spotify playlist error",d),this.toastService.add({severity:"danger",summary:"Failed",detail:g}),this.exit.emit()}})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=P({type:o,selectors:[["app-playlist-split"]],inputs:{playlist:"playlist",showSplitPlaylistSidebar:"showSplitPlaylistSidebar"},outputs:{showSplitPlaylistSidebarChange:"showSplitPlaylistSidebarChange",exit:"exit"},standalone:!0,features:[W],decls:22,vars:6,consts:[["styleClass","p-sidebar-md","title","Split Playlist","position","right",1,"no-sidebar-shadow",3,"visibleChange","onHide","visible"],["pTemplate","header"],[1,"px-5","h-full"],[1,"text-lg","font-semibold"],[1,"block","font-bold","text-gray-600","dark:text-gray-300","mt-4"],[1,"flex","flex-col","ml-4"],[1,"flex","py-3","align-middle"],["name","dividePlayListIntoXParts","value","dividePlayListIntoXParts","inputId","dividePlayListIntoXParts",3,"ngModelChange","ngModel"],["for","dividePlayListIntoXParts",1,"ml-2"],[1,"flex","py-3"],["name","createPlayListWithXSongs","value","createPlayListWithXSongs","disabled","true","inputId","createPlayListWithXSongs",3,"ngModelChange","ngModel"],["for","createPlayListWithXSongs",1,"ml-2"],[1,""],["for","minmax",1,"block","pb-3"],["inputId","minmax","mode","decimal","min","0","max","100",3,"ngModelChange","ngModel"],[1,"flex","flex-row-reverse","mt-4"],["label","Split Playlist","icon","pi pi-check",1,"text-2xl",3,"onClick","loading"],[1,"font-semibold","text-2xl"]],template:function(n,a){n&1&&(l(0,"p-sidebar",0),x("visibleChange",function(d){return w(a.showSplitPlaylistSidebar,d)||(a.showSplitPlaylistSidebar=d),d}),y("onHide",function(){return a.showSplitPlaylistSidebarChange.emit(!1)}),_(1,Yt,2,0,"ng-template",1),l(2,"div",2)(3,"p",3),m(4," Split the playlist onto many parts. The original playlist won't be modified or deleted. "),s(),l(5,"span",4),m(6," Split type: "),s(),l(7,"div",5)(8,"div",6)(9,"p-radioButton",7),x("ngModelChange",function(d){return w(a.splitMode,d)||(a.splitMode=d),d}),s(),l(10,"label",8),m(11," Divide Playlist into X parts "),s()(),l(12,"div",9)(13,"p-radioButton",10),x("ngModelChange",function(d){return w(a.splitMode,d)||(a.splitMode=d),d}),s(),l(14,"label",11),m(15," Create Playlist with X songs each "),s()()(),l(16,"div",12)(17,"label",13),m(18),s(),l(19,"p-inputNumber",14),x("ngModelChange",function(d){return w(a.splitCount,d)||(a.splitCount=d),d}),s()(),l(20,"div",15)(21,"p-button",16),y("onClick",function(){return a.splitPlaylist()}),s()()()()),n&2&&(S("visible",a.showSplitPlaylistSidebar),r(9),S("ngModel",a.splitMode),r(4),S("ngModel",a.splitMode),r(5),E(" ",a.splitMode==="createPlayListWithXSongs"?"Number of songs":"Number of parts",""),r(),S("ngModel",a.splitCount),r(2),p("loading",a.loading))},dependencies:[Q,G,D,ge,Y,_e,he,fe,ct,pt,be,ye],encapsulation:2});let t=o;return t})();var Jt=t=>["/home/playlist",t];function $t(t,o){if(t&1){let e=v();l(0,"div",1)(1,"a",6),T(2,"img",7),s(),l(3,"div",8)(4,"p",9),m(5),s(),l(6,"i",10),y("click",function(){let n=h(e).$implicit,a=c();return a.setUpdateItem(n),f(a.sidebarVisible=!0)}),s()()()}if(t&2){let e=o.$implicit;r(),p("routerLink",oe(3,Jt,e.id)),r(),p("src",e.images&&e.images.length?e.images[0].url:"https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png",Se),r(3),E(" ",e.name," ")}}function ei(t,o){if(t&1){let e=v();l(0,"div",3)(1,"div",11),T(2,"div",12),l(3,"div",13)(4,"div")(5,"h2",14),m(6),s(),l(7,"p")(8,"strong"),m(9,"Made by"),s(),m(10),s(),l(11,"p")(12,"strong"),m(13,"With"),s(),m(14),s()()(),T(15,"img",15),s(),l(16,"div",16)(17,"div",17),m(18,"Creation Tools"),s(),l(19,"div",18)(20,"div",19),y("click",function(){h(e);let n=c();return f(n.splitPlaylistSidebarVisible=!0)}),m(21," Split Playlist "),s(),l(22,"div",19),y("click",function(){h(e);let n=c();return f(n.deletePlaylist(n.modPlaylist))}),m(23," Delete Playlist "),s(),l(24,"div",19),y("click",function(){h(e);let n=c();return f(n.clonePlaylist(n.modPlaylist.id,(n.modPlaylist.tracks==null?null:n.modPlaylist.tracks.total)||0,n.modPlaylist.name))}),m(25," Clone Playlist "),s(),l(26,"div",19),y("click",function(){h(e);let n=c();return f(n.deleteDuplicates(n.modPlaylist.id,(n.modPlaylist.tracks==null?null:n.modPlaylist.tracks.total)||0,n.modPlaylist.name))}),m(27," Delete Duplicates "),s(),l(28,"div",19),y("click",function(){h(e);let n=c();return f(n.filteredGenre(n.modPlaylist))}),m(29," Filtered Genre "),s()()()()}if(t&2){let e=c();r(6),E(" ",e.modPlaylist.name," "),r(4),E(" ",e.modPlaylist.owner.display_name," "),r(4),E(" ",(e.modPlaylist.tracks==null?null:e.modPlaylist.tracks.total)||0," items"),r(),p("src",e.modPlaylist.images&&e.modPlaylist.images.length?e.modPlaylist.images[0].url:"https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png",Se)}}function ti(t,o){if(t&1){let e=v();l(0,"app-playlist-split",20),x("showSplitPlaylistSidebarChange",function(n){h(e);let a=c();return w(a.splitPlaylistSidebarVisible,n)||(a.splitPlaylistSidebarVisible=n),f(n)}),y("onClose",function(){h(e);let n=c();return f(n.closeSidebar())}),s()}if(t&2){let e=c();p("playlist",e.modPlaylist),S("showSplitPlaylistSidebar",e.splitPlaylistSidebarVisible)}}function ii(t,o){if(t&1){let e=v();l(0,"app-genre",21),x("showSidebarChange",function(n){h(e);let a=c();return w(a.genreSidebar,n)||(a.genreSidebar=n),f(n)}),s()}if(t&2){let e=c();p("playlist",e.modPlaylist),S("showSidebar",e.genreSidebar)}}var Sn=(()=>{let o=class o{constructor(){this.splitPlaylistSidebarVisible=!1,this.toastService=V(ce),this.userPlaylists=[],this.spotify=V(ue),this.sidebarVisible=!1,this.genreSidebar=!1,this.showSpinner=Je()}closeGenre(){throw new Error("Method not implemented.")}fetchUserPlaylists(){return I(this,null,function*(){this.showSpinner.set(!0);let i=yield this.spotify.fetchMyPlaylists();console.log(i),this.userPlaylists=i.items,this.showSpinner.set(!1)})}setUpdateItem(i){this.modPlaylist=i}clonePlaylist(i,n,a){return I(this,null,function*(){console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistName:",a),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ totalTracks:",n),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistId:",i)})}deleteDuplicates(i,n,a){return I(this,null,function*(){console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistName:",a),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ totalTracks:",n),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistId:",i)})}ngOnInit(){return I(this,null,function*(){this.fetchUserPlaylists()})}deletePlaylist(i){return I(this,null,function*(){let n=yield this.spotify.getUser();if(i.owner.id!==n?.id)return this.toastService.add({severity:"error",summary:"Error",detail:"You are no the owner of this playlist"});this.spotify.deletePlaylist(i.id),this.toastService.add({severity:"success",summary:"Success",detail:"Playlist deleted successfully"}),this.closeSidebar()})}closeSidebar(){this.modPlaylist=void 0,this.sidebarVisible=!1,this.splitPlaylistSidebarVisible=!1,this.fetchUserPlaylists()}filteredGenre(i){this.modPlaylist=i,this.genreSidebar=!0}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=P({type:o,selectors:[["app-playlist-card"]],standalone:!0,features:[W],decls:7,vars:4,consts:[[1,"flex","flex-wrap","justify-items-start","mt-4"],[1,"max-w-80","overflow-hidden","rounded-md","m-4","shadow-card"],["styleClass","p-sidebar-md","position","right",3,"visibleChange","visible"],[1,""],[3,"playlist","showSplitPlaylistSidebar"],[3,"playlist","showSidebar"],[3,"routerLink"],["width","300px","alt","",1,"border-b",3,"src"],[1,"m-2","flex","justify-between"],[1,"text-lg","font-semibold","leading-none","m-0","truncate"],[1,"pi","pi-ellipsis-v","cursor-pointer",2,"font-size","1rem",3,"click"],[1,"relative"],[1,"absolute","flex","h-80","w-full","items-end","bg-black","opacity-60"],[1,"absolute","flex","h-80","w-full","items-end","p-4","text-white"],[1,"mb-2","text-2xl","font-bold","tracking-wider"],["alt","","srcset","",1,"h-80","w-full","object-cover",3,"src"],[1,"px-4"],[1,"text-2xl","font-bold","pt-4","pb-2"],[1,"mx-4"],[1,"cursor-pointer","pl-4","py-2","text-lg","hover:text-purple-600",3,"click"],[3,"showSplitPlaylistSidebarChange","onClose","playlist","showSplitPlaylistSidebar"],[3,"showSidebarChange","playlist","showSidebar"]],template:function(n,a){n&1&&(l(0,"div",0),te(1,$t,7,5,"div",1,ee),l(3,"p-sidebar",2),x("visibleChange",function(d){return w(a.sidebarVisible,d)||(a.sidebarVisible=d),d}),_(4,ei,30,4,"div",3),s(),_(5,ti,1,2,"app-playlist-split",4)(6,ii,1,2,"app-genre",5),s()),n&2&&(r(),ie(a.userPlaylists),r(2),S("visible",a.sidebarVisible),r(),O(a.modPlaylist?4:-1),r(),O(a.splitPlaylistSidebarVisible&&a.modPlaylist?5:-1),r(),O(a.genreSidebar&&a.modPlaylist?6:-1))},dependencies:[mt,Ye,Q,G,ft,ht]});let t=o;return t})();export{Sn as PlayListCardComponent};
