import{U as f,e as a,f as p,rc as l}from"./chunk-IHLDKJ5M.js";var k=(()=>{let e=class e{constructor(){this.updateAccessTokens()}updateAccessTokens(){console.log("hello world")}logOut(){window.location.href="/login"}fetchMe(){return a(this,null,function*(){return this.user||(this.user=(yield this.spotifyApi.getMe()).body),this.user})}fetchMyPlaylists(t=!1){return a(this,null,function*(){return(!this.myPlayLists||t)&&(this.myPlayLists=(yield this.spotifyApi.getUserPlaylists()).body),this.myPlayLists})}fetchPlaylist(t){return a(this,null,function*(){return(yield this.spotifyApi.getPlaylist(t)).body})}fetchAllTracks(t,s){return a(this,null,function*(){let i=Math.ceil(s/50),c=[],y=[];for(let o=0;o<i;o++){let h=o*50,r=this.spotifyApi.getPlaylistTracks(t,{limit:50,offset:h});y.push(r)}return(yield Promise.all(y)).forEach(o=>{c.push(...o.body.items)}),console.timeEnd("all req"),c})}createPlaylist(t){return a(this,null,function*(){return(yield this.spotifyApi.createPlaylist(t,{collaborative:!1,description:"Created By spotools",public:!0})).body})}addTracksToPlaylist(t,s,i){return a(this,null,function*(){return(yield this.spotifyApi.addTracksToPlaylist(t,s,{position:i})).body})}deletePlaylist(t){return a(this,null,function*(){return(yield this.spotifyApi.unfollowPlaylist(t)).body})}fetchLikedSongs(){return a(this,null,function*(){let t=[],s=0;do{let i=(yield this.spotifyApi.getMySavedTracks({limit:50,offset:t.length})).body;s=i.total,t.push(...i.items)}while(t.length<s);return t})}removeSongFromPlaylist(t,s){return a(this,null,function*(){if(s.length===0)return!1;let i=s.map(r=>({uri:r})),c=l(i,100);try{for(var y=p(c),u,o,h;u=!(o=yield y.next()).done;u=!1){let r=o.value;yield this.spotifyApi.removeTracksFromPlaylist(t,r)}}catch{h=[o]}finally{try{u&&(o=y.return)&&(yield o.call(y))}finally{if(h)throw h[0]}}return!0})}removeFromMySavedTracks(t){return a(this,null,function*(){let s=l(t,50);for(let i of s)yield this.spotifyApi.removeFromMySavedTracks(i)})}addToMySavedTracks(t){return a(this,null,function*(){let s=l(t,50);for(let i of s)yield this.spotifyApi.addToMySavedTracks(i)})}userStats(){return a(this,null,function*(){return(yield this.spotifyApi.getMyTopTracks({time_range:"long_term"})).body})}getUserActivity(){return a(this,null,function*(){let t=yield this.spotifyApi.getMyTopTracks({limit:50,time_range:"long_term",offset:0});return t.statusCode?{success:!0,data:t.body}:{success:!1,error:"failed to getUser Activity"}})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();export{k as a};
