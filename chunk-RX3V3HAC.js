import{a as Ge,b as qe,c as Ke,d as Ye,e as Je,f as $e,g as et,j as tt,k as it,m as nt,n as at}from"./chunk-JTTKL4EQ.js";import{b as Xe,c as ke}from"./chunk-4RXXKBYI.js";import{A as ge,C as ve,E as Ce,F as Se,H as we,N as R,P as ze,Q as He,g as Ue,n as H,r as ae,t as se,u as G,v as q,z as Ze}from"./chunk-Y6WT2BQX.js";import{$a as K,Ab as Ne,Bb as X,Cb as Z,Db as z,Eb as u,Fb as Fe,Gb as I,Ib as E,Jb as M,Kb as L,La as pe,Lb as Oe,Mb as Y,Mc as W,Nc as oe,Ob as J,Pa as l,Pb as Be,Qa as C,Qb as ye,Rb as je,T as Pe,Tb as Ae,U as Ie,Ua as Me,V as N,Yb as Re,_ as F,ca as x,da as O,db as b,dc as $,eb as y,f as T,fb as c,fc as k,g as Te,gc as ee,jb as B,kb as me,la as h,lb as Le,ma as f,mb as Ve,nb as De,nc as We,ob as o,pb as r,qa as Ee,qb as P,rb as ue,sa as ce,sb as he,ta as S,tb as j,ub as w,uc as te,vb as _,wb as p,wc as ie,xb as fe,xc as ne,yb as be,yc as Qe,zb as _e,zc as A}from"./chunk-6DCACZBI.js";var st=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=O({type:i});static \u0275inj=N({imports:[A,q]})}return i})();var mt=["*"],ut=(i,s,e,t,n,a)=>({"p-sidebar":!0,"p-sidebar-active":i,"p-sidebar-left":s,"p-sidebar-right":e,"p-sidebar-top":t,"p-sidebar-bottom":n,"p-sidebar-full":a}),ht=(i,s)=>({transform:i,transition:s}),ft=i=>({value:"visible",params:i});function bt(i,s){i&1&&j(0)}function _t(i,s){if(i&1&&(ue(0),b(1,bt,1,0,"ng-container",5),he()),i&2){let e=p(2);l(),c("ngTemplateOutlet",e.headlessTemplate)}}function yt(i,s){i&1&&j(0)}function gt(i,s){i&1&&P(0,"TimesIcon",13),i&2&&(c("styleClass","p-sidebar-close-icon"),y("data-pc-section","closeicon"))}function vt(i,s){}function Ct(i,s){i&1&&b(0,vt,0,0,"ng-template")}function St(i,s){if(i&1&&(o(0,"span",14),b(1,Ct,1,0,null,5),r()),i&2){let e=p(4);y("data-pc-section","closeicon"),l(),c("ngTemplateOutlet",e.closeIconTemplate)}}function wt(i,s){if(i&1){let e=w();o(0,"button",10),_("click",function(n){h(e);let a=p(3);return f(a.close(n))})("keydown.enter",function(n){h(e);let a=p(3);return f(a.close(n))}),b(1,gt,1,2,"TimesIcon",11)(2,St,2,2,"span",12),r()}if(i&2){let e=p(3);y("aria-label",e.ariaCloseLabel)("data-pc-section","closebutton")("data-pc-group-section","iconcontainer"),l(),c("ngIf",!e.closeIconTemplate),l(),c("ngIf",e.closeIconTemplate)}}function kt(i,s){i&1&&j(0)}function xt(i,s){i&1&&j(0)}function Tt(i,s){if(i&1&&(ue(0),o(1,"div",15),b(2,xt,1,0,"ng-container",5),r(),he()),i&2){let e=p(3);l(),y("data-pc-section","footer"),l(),c("ngTemplateOutlet",e.footerTemplate)}}function Pt(i,s){if(i&1&&(o(0,"div",6),b(1,yt,1,0,"ng-container",5)(2,wt,3,5,"button",7),r(),o(3,"div",8),be(4),b(5,kt,1,0,"ng-container",5),r(),b(6,Tt,3,2,"ng-container",9)),i&2){let e=p(2);y("data-pc-section","header"),l(),c("ngTemplateOutlet",e.headerTemplate),l(),c("ngIf",e.showCloseIcon),l(),y("data-pc-section","content"),l(2),c("ngTemplateOutlet",e.contentTemplate),l(),c("ngIf",e.footerTemplate)}}function It(i,s){if(i&1){let e=w();o(0,"div",3,0),_("@panelState.start",function(n){h(e);let a=p();return f(a.onAnimationStart(n))})("@panelState.done",function(n){h(e);let a=p();return f(a.onAnimationEnd(n))})("keydown",function(n){h(e);let a=p();return f(a.onKeyDown(n))}),b(2,_t,2,1,"ng-container",4)(3,Pt,7,6,"ng-template",null,1,Re),r()}if(i&2){let e=z(4),t=p();B(t.styleClass),c("ngClass",Ae(9,ut,t.visible,t.position==="left"&&!t.fullScreen,t.position==="right"&&!t.fullScreen,t.position==="top"&&!t.fullScreen,t.position==="bottom"&&!t.fullScreen,t.fullScreen))("@panelState",J(19,ft,Be(16,ht,t.transformOptions,t.transitionOptions)))("ngStyle",t.style),y("data-pc-name","sidebar")("data-pc-section","root"),l(2),c("ngIf",t.headlessTemplate)("ngIfElse",e)}}var Et=Se([ve({transform:"{{transform}}",opacity:0}),ge("{{transition}}")]),Mt=Se([ge("{{transition}}",ve({transform:"{{transform}}",opacity:0}))]),le=(()=>{class i{document;el;renderer;cd;config;appendTo;blockScroll=!1;style;styleClass;ariaCloseLabel;autoZIndex=!0;baseZIndex=0;modal=!0;dismissible=!0;showCloseIcon=!0;closeOnEscape=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";get visible(){return this._visible}set visible(e){this._visible=e}get position(){return this._position}set position(e){switch(this._position=e,e){case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break}}get fullScreen(){return this._fullScreen}set fullScreen(e){this._fullScreen=e,e&&(this.transformOptions="none")}templates;onShow=new S;onHide=new S;visibleChange=new S;initialized;_visible;_position="left";_fullScreen=!1;container;transformOptions="translate3d(-100%, 0px, 0px)";mask;maskClickListener;documentEscapeListener;animationEndListener;contentTemplate;headerTemplate;footerTemplate;closeIconTemplate;headlessTemplate;constructor(e,t,n,a,m){this.document=e,this.el=t,this.renderer=n,this.cd=a,this.config=m}ngAfterViewInit(){this.initialized=!0}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"headless":this.headlessTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}onKeyDown(e){e.code==="Escape"&&this.hide(!1)}show(){this.autoZIndex&&H.set("modal",this.container,this.baseZIndex||this.config.zIndex.modal),this.modal&&this.enableModality(),this.onShow.emit({}),this.visibleChange.emit(!0)}hide(e=!0){e&&this.onHide.emit({}),this.modal&&this.disableModality()}close(e){this.hide(),this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.mask||(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(this.container.style.zIndex)-1)),R.addMultipleClasses(this.mask,"p-component-overlay p-sidebar-mask p-component-overlay p-component-overlay-enter"),this.dismissible&&(this.maskClickListener=this.renderer.listen(this.mask,"click",e=>{this.dismissible&&this.close(e)})),this.renderer.appendChild(this.document.body,this.mask),this.blockScroll&&R.blockBodyScroll())}disableModality(){this.mask&&(R.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyModal.bind(this)))}destroyModal(){this.unbindMaskClickListener(),this.mask&&this.renderer.removeChild(this.document.body,this.mask),this.blockScroll&&R.unblockBodyScroll(),this.unbindAnimationEndListener(),this.mask=null}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.appendContainer(),this.show(),this.closeOnEscape&&this.bindDocumentEscapeListener();break}}onAnimationEnd(e){switch(e.toState){case"void":this.hide(!1),H.clear(this.container),this.unbindGlobalListeners();break}}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):R.appendChild(this.container,this.appendTo))}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentEscapeListener=this.renderer.listen(e,"keydown",t=>{t.which==27&&parseInt(this.container.style.zIndex)===H.get(this.container)&&this.close(t)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindGlobalListeners(){this.unbindMaskClickListener(),this.unbindDocumentEscapeListener()}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}ngOnDestroy(){this.initialized=!1,this.visible&&this.modal&&this.destroyModal(),this.appendTo&&this.container&&this.renderer.appendChild(this.el.nativeElement,this.container),this.container&&this.autoZIndex&&H.clear(this.container),this.container=null,this.unbindGlobalListeners(),this.unbindAnimationEndListener()}static \u0275fac=function(t){return new(t||i)(C(We),C(ce),C(Me),C($),C(se))};static \u0275cmp=x({type:i,selectors:[["p-sidebar"]],contentQueries:function(t,n,a){if(t&1&&_e(a,G,4),t&2){let m;X(m=Z())&&(n.templates=m)}},hostAttrs:[1,"p-element"],inputs:{appendTo:"appendTo",blockScroll:[2,"blockScroll","blockScroll",k],style:"style",styleClass:"styleClass",ariaCloseLabel:"ariaCloseLabel",autoZIndex:[2,"autoZIndex","autoZIndex",k],baseZIndex:[2,"baseZIndex","baseZIndex",ee],modal:[2,"modal","modal",k],dismissible:[2,"dismissible","dismissible",k],showCloseIcon:[2,"showCloseIcon","showCloseIcon",k],closeOnEscape:[2,"closeOnEscape","closeOnEscape",k],transitionOptions:"transitionOptions",visible:"visible",position:"position",fullScreen:"fullScreen"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange"},features:[K],ngContentSelectors:mt,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["role","complementary",3,"ngClass","ngStyle","class","keydown",4,"ngIf"],["role","complementary",3,"keydown","ngClass","ngStyle"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"p-sidebar-header"],["type","button","class","p-sidebar-close p-sidebar-icon p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[1,"p-sidebar-content"],[4,"ngIf"],["type","button","pRipple","",1,"p-sidebar-close","p-sidebar-icon","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-sidebar-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-sidebar-close-icon"],[1,"p-sidebar-footer"]],template:function(t,n){t&1&&(fe(),b(0,It,5,21,"div",2)),t&2&&c("ngIf",n.visible)},dependencies:()=>[te,ie,Qe,ne,ze,ke],styles:[`@layer primeng{.p-sidebar{position:fixed;transition:transform .3s;display:flex;flex-direction:column}.p-sidebar-content{position:relative;overflow-y:auto;flex-grow:1}.p-sidebar-header{display:flex;align-items:center}.p-sidebar-footer{margin-top:auto}.p-sidebar-icon{display:flex;align-items:center;justify-content:center;margin-left:auto}.p-sidebar-left{top:0;left:0;width:20rem;height:100%}.p-sidebar-right{top:0;right:0;width:20rem;height:100%}.p-sidebar-top{top:0;left:0;width:100%;height:10rem}.p-sidebar-bottom{bottom:0;left:0;width:100%;height:10rem}.p-sidebar-full{width:100%;height:100%;top:0;left:0;-webkit-transition:none;transition:none}.p-sidebar-left.p-sidebar-sm,.p-sidebar-right.p-sidebar-sm{width:20rem}.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-md{width:40rem}.p-sidebar-left.p-sidebar-lg,.p-sidebar-right.p-sidebar-lg{width:60rem}.p-sidebar-top.p-sidebar-sm,.p-sidebar-bottom.p-sidebar-sm{height:10rem}.p-sidebar-top.p-sidebar-md,.p-sidebar-bottom.p-sidebar-md{height:20rem}.p-sidebar-top.p-sidebar-lg,.p-sidebar-bottom.p-sidebar-lg{height:30rem}@media screen and (max-width: 64em){.p-sidebar-left.p-sidebar-lg,.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-lg,.p-sidebar-right.p-sidebar-md{width:20rem}}}
`],encapsulation:2,data:{animation:[Ze("panelState",[Ce("void => visible",[we(Et)]),Ce("visible => void",[we(Mt)])])]},changeDetection:0})}return i})(),de=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=O({type:i});static \u0275inj=N({imports:[A,He,q,ke,q]})}return i})();var Lt=["input"],Vt=(i,s,e,t)=>({"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":s,"p-radiobutton-focused":e,"p-variant-filled":t}),Dt=(i,s,e)=>({"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":s,"p-focus":e}),Nt=(i,s,e)=>({"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":s,"p-radiobutton-label-focus":e});function Ft(i,s){if(i&1){let e=w();o(0,"label",7),_("click",function(n){h(e);let a=p();return f(a.select(n))}),u(1),r()}if(i&2){let e=p(),t=z(3);B(e.labelStyleClass),c("ngClass",ye(6,Nt,t.checked,e.disabled,e.focused)),y("for",e.inputId)("data-pc-section","label"),l(),Fe(e.label)}}var Ot={provide:Ge,useExisting:Pe(()=>xe),multi:!0},Bt=(()=>{class i{accessors=[];add(e,t){this.accessors.push([e,t])}remove(e){this.accessors=this.accessors.filter(t=>t[1]!==e)}select(e){this.accessors.forEach(t=>{this.isSameGroup(t,e)&&t[1]!==e&&t[1].writeValue(e.value)})}isSameGroup(e,t){return e[0].control?e[0].control.root===t.control.control.root&&e[1].name===t.name:!1}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),xe=(()=>{class i{cd;injector;registry;config;value;formControlName;name;disabled;label;variant="outlined";tabindex;inputId;ariaLabelledBy;ariaLabel;style;styleClass;labelStyleClass;autofocus;onClick=new S;onFocus=new S;onBlur=new S;inputViewChild;onModelChange=()=>{};onModelTouched=()=>{};checked;focused;control;constructor(e,t,n,a){this.cd=e,this.injector=t,this.registry=n,this.config=a}ngOnInit(){this.control=this.injector.get(qe),this.checkName(),this.registry.add(this.control,this)}handleClick(e,t,n){e.preventDefault(),!this.disabled&&(this.select(e),n&&t.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit({originalEvent:e,value:this.value}))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error(`
          If you define both a name and a formControlName attribute on your radio button, their values
          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>
        `)}static \u0275fac=function(t){return new(t||i)(C($),C(Ee),C(Bt),C(se))};static \u0275cmp=x({type:i,selectors:[["p-radioButton"]],viewQuery:function(t,n){if(t&1&&Ne(Lt,5),t&2){let a;X(a=Z())&&(n.inputViewChild=a.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:[2,"disabled","disabled",k],label:"label",variant:"variant",tabindex:[2,"tabindex","tabindex",ee],inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",autofocus:[2,"autofocus","autofocus",k]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[Oe([Ot]),K],decls:7,vars:31,consts:[["input",""],[3,"click","ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio","pAutoFocus","",3,"focus","blur","checked","disabled","value","autofocus"],[3,"ngClass"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"],[3,"click","ngClass"]],template:function(t,n){if(t&1){let a=w();o(0,"div",1),_("click",function(d){h(a);let D=z(3);return f(n.handleClick(d,D,!0))}),o(1,"div",2)(2,"input",3,0),_("focus",function(d){return h(a),f(n.onInputFocus(d))})("blur",function(d){return h(a),f(n.onInputBlur(d))}),r()(),o(4,"div",4),P(5,"span",5),r()(),b(6,Ft,2,10,"label",6)}t&2&&(B(n.styleClass),c("ngStyle",n.style)("ngClass",je(22,Vt,n.checked,n.disabled,n.focused,n.variant==="filled"||n.config.inputStyle()==="filled")),y("data-pc-name","radiobutton")("data-pc-section","root"),l(),y("data-pc-section","hiddenInputWrapper"),l(),c("checked",n.checked)("disabled",n.disabled)("value",n.value)("autofocus",n.autofocus),y("id",n.inputId)("name",n.name)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("tabindex",n.tabindex)("aria-checked",n.checked)("data-pc-section","hiddenInput"),l(2),c("ngClass",ye(27,Dt,n.checked,n.disabled,n.focused)),y("data-pc-section","input"),l(),y("data-pc-section","icon"),l(),c("ngIf",n.label))},dependencies:[te,ie,ne,$e],encapsulation:2,changeDetection:0})}return i})(),lt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=O({type:i});static \u0275inj=N({imports:[A,et]})}return i})();function At(i,s){i&1&&(o(0,"div",17),u(1,"SPLIT PLAYLIST"),r())}var dt=(()=>{let s=class s{constructor(){this.userService=F(oe),this.toastService=F(ae),this.splitCount=1,this.loading=!1,this.showSplitPlaylistSidebar=!1,this.showSplitPlaylistSidebarChange=new S,this.onClose=new S,this.splitMode="dividePlayListIntoXParts"}splitPlaylist(){return T(this,null,function*(){try{this.loading=!0;let t=this.playlist.tracks.total,n=yield this.userService.fetchAllTracks(this.playlist.id,t);if(this.splitMode==="dividePlayListIntoXParts"){let a=Math.ceil(t/this.splitCount),m=W(n,a);for(let d=0;d<m.length;d++){let D=yield this.userService.createPlaylist(`${this.playlist.name} - splitted #${d+1}`);if(!D)throw new Error("no new playlist");let V=m[d].map(v=>v.track?.uri),g=W(V,100);for(let v=0;v<g.length;v++)yield this.userService.addTracksToPlaylist(D.id,g[v])}}this.toastService.add({severity:"success",summary:"Success",detail:"Playlist splitted successfully"}),this.onClose.emit(),this.loading=!1}catch(t){console.error("creating spotify playlist error",t),this.toastService.add({severity:"danger",summary:"Failed",detail:"Playlist splitted successfully"}),this.onClose.emit()}})}};s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=x({type:s,selectors:[["app-playlist-split"]],inputs:{playlist:"playlist",showSplitPlaylistSidebar:"showSplitPlaylistSidebar"},outputs:{showSplitPlaylistSidebarChange:"showSplitPlaylistSidebarChange",onClose:"onClose"},standalone:!0,features:[Y],decls:22,vars:6,consts:[["styleClass","p-sidebar-md","title","Split Playlist","position","right",1,"no-sidebar-shadow",3,"visibleChange","onHide","visible"],["pTemplate","header"],[1,"px-5","h-full"],[1,"text-lg","font-semibold"],[1,"block","font-bold","text-gray-600","dark:text-gray-300","mt-4"],[1,"flex","flex-col","ml-4"],[1,"flex","py-3","align-middle"],["name","dividePlayListIntoXParts","value","dividePlayListIntoXParts","inputId","dividePlayListIntoXParts",3,"ngModelChange","ngModel"],["for","dividePlayListIntoXParts",1,"ml-2"],[1,"flex","py-3"],["name","createPlayListWithXSongs","value","createPlayListWithXSongs","disabled","true","inputId","createPlayListWithXSongs",3,"ngModelChange","ngModel"],["for","createPlayListWithXSongs",1,"ml-2"],[1,""],["for","minmax",1,"block","pb-3"],["inputId","minmax","mode","decimal","min","0","max","100",3,"ngModelChange","ngModel"],[1,"flex","flex-row-reverse","mt-4"],["label","Split Playlist","icon","pi pi-check",1,"text-2xl",3,"onClick","loading"],[1,"font-semibold","text-2xl"]],template:function(n,a){n&1&&(o(0,"p-sidebar",0),L("visibleChange",function(d){return M(a.showSplitPlaylistSidebar,d)||(a.showSplitPlaylistSidebar=d),d}),_("onHide",function(){return a.showSplitPlaylistSidebarChange.emit(!1)}),b(1,At,2,0,"ng-template",1),o(2,"div",2)(3,"p",3),u(4," Split the playlist onto many parts. The original playlist won't be modified or deleted. "),r(),o(5,"label",4),u(6," Split type: "),r(),o(7,"div",5)(8,"div",6)(9,"p-radioButton",7),L("ngModelChange",function(d){return M(a.splitMode,d)||(a.splitMode=d),d}),r(),o(10,"label",8),u(11," Divide Playlist into X parts "),r()(),o(12,"div",9)(13,"p-radioButton",10),L("ngModelChange",function(d){return M(a.splitMode,d)||(a.splitMode=d),d}),r(),o(14,"label",11),u(15," Create Playlist with X songs each "),r()()(),o(16,"div",12)(17,"label",13),u(18),r(),o(19,"p-inputNumber",14),L("ngModelChange",function(d){return M(a.splitCount,d)||(a.splitCount=d),d}),r()(),o(20,"div",15)(21,"p-button",16),_("onClick",function(){return a.splitPlaylist()}),r()()()()),n&2&&(E("visible",a.showSplitPlaylistSidebar),l(9),E("ngModel",a.splitMode),l(4),E("ngModel",a.splitMode),l(5),I(" ",a.splitMode==="createPlayListWithXSongs"?"Number of songs":"Number of parts",""),l(),E("ngModel",a.splitCount),l(2),c("loading",a.loading))},dependencies:[de,le,G,lt,xe,Je,Ke,Ye,at,nt,it,tt],encapsulation:2});let i=s;return i})();var Rt=i=>["/home/playlist",i];function Wt(i,s){if(i&1){let e=w();o(0,"div",1)(1,"a",5),P(2,"img",6),r(),o(3,"div",7)(4,"p",8),u(5),r(),o(6,"i",9),_("click",function(){let n=h(e).$implicit,a=p();return a.setUpdateItem(n),f(a.sidebarVisible=!0)}),r()()()}if(i&2){let e=s.$implicit;l(),c("routerLink",J(3,Rt,e.id)),l(),c("src",e.images&&e.images.length?e.images[0].url:"https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png",pe),l(3),I(" ",e.name," ")}}function Qt(i,s){if(i&1){let e=w();o(0,"div",3)(1,"div",10),P(2,"div",11),o(3,"div",12)(4,"div")(5,"h2",13),u(6),r(),o(7,"p")(8,"strong"),u(9,"Made by"),r(),u(10),r(),o(11,"p")(12,"strong"),u(13,"With"),r(),u(14),r()()(),P(15,"img",14),r(),o(16,"div",15)(17,"div",16),u(18,"Creation Tools"),r(),o(19,"div",17)(20,"div",18),_("click",function(){h(e);let n=p();return f(n.splitPlaylistSidebarVisible=!0)}),u(21," Split Playlist "),r(),o(22,"div",18),_("click",function(){h(e);let n=p();return f(n.deletePlaylist(n.modPlaylist.id))}),u(23," Delete Playlist "),r(),o(24,"div",18),_("click",function(){h(e);let n=p();return f(n.clonePlaylist(n.modPlaylist.id,n.modPlaylist.tracks.total,n.modPlaylist.name))}),u(25," Clone Playlist "),r(),o(26,"div",18),_("click",function(){h(e);let n=p();return f(n.deleteDuplicates(n.modPlaylist.id,n.modPlaylist.tracks.total,n.modPlaylist.name))}),u(27," Delete Duplicates "),r()()()()}if(i&2){let e=p();l(6),I(" ",e.modPlaylist.name," "),l(4),I(" ",e.modPlaylist.owner.display_name," "),l(4),I(" ",e.modPlaylist.tracks.total," items"),l(),c("src",e.modPlaylist.images&&e.modPlaylist.images.length?e.modPlaylist.images[0].url:"https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png",pe)}}function Ut(i,s){if(i&1){let e=w();o(0,"app-playlist-split",19),L("showSplitPlaylistSidebarChange",function(n){h(e);let a=p();return M(a.splitPlaylistSidebarVisible,n)||(a.splitPlaylistSidebarVisible=n),f(n)}),_("onClose",function(){h(e);let n=p();return f(n.closeSidebar())}),r()}if(i&2){let e=p();c("playlist",e.modPlaylist),E("showSplitPlaylistSidebar",e.splitPlaylistSidebarVisible)}}var Yi=(()=>{let s=class s{constructor(){this.splitPlaylistSidebarVisible=!1,this.toastService=F(ae),this.userService=F(oe),this.sidebarVisible=!1,this.showSpinner=Xe()}fetchUserPlaylists(){return T(this,null,function*(){this.showSpinner.set(!0),this.userPlaylists=yield this.userService.fetchMyPlaylists(),this.showSpinner.set(!1)})}setUpdateItem(t){this.modPlaylist=t,console.log(this.modPlaylist)}clonePlaylist(t,n,a){return T(this,null,function*(){try{if(this.showSpinner.set(!0),!t)return this.toastService.add({severity:"error",summary:"Error",detail:"No playlist id"});if(!n||n===0)return this.toastService.add({severity:"error",summary:"Error",detail:"No tracks Available"});let g=yield this.userService.createPlaylist(`${a} - cloned`);if(!g)return this.toastService.add({severity:"error",summary:"Error",detail:"Failed To Create new playlist"});let v=yield this.userService.fetchAllTracks(t,n),Q=W(v,100);try{for(var m=Te(Q),d,D,V;d=!(D=yield m.next()).done;d=!1){let U=D.value;yield this.userService.addTracksToPlaylist(g.id,U.map(ct=>ct.track?.uri))}}catch{V=[D]}finally{try{d&&(D=m.return)&&(yield D.call(m))}finally{if(V)throw V[0]}}this.toastService.add({severity:"success",summary:"Success",detail:"Playlist cloned successfully"}),this.showSpinner.set(!1),this.closeSidebar()}catch(g){this.toastService.add({severity:"error",summary:"Error",detail:"Failed To Clone Playlist"}),console.log(g)}})}deleteDuplicates(t,n,a){return T(this,null,function*(){try{if(this.showSpinner.set(!0),!t||!n||n===0)throw new Error("No playlist id or no tracks available");let m=yield this.userService.fetchAllTracks(t,n),d=m.reduce((V,{track:g},v)=>(m.find((Q,U)=>U>v&&Q.track?.uri===g?.uri)&&V.add(g?.uri),V),new Set);yield this.userService.removeSongFromPlaylist(t,[...d]);let D=W(Array.from(d),100);for(let V of D){let g=m.reduce((v,{track:Q},U)=>(V.includes(Q?.uri)&&v.push(U),v),[]);yield this.userService.addTracksToPlaylist(t,V,Math.min(...g))}}catch(m){this.toastService.add({severity:"error",summary:"Error",detail:"Failed To Clone Playlist"}),console.log(m)}finally{this.showSpinner.set(!1),this.closeSidebar()}})}ngOnInit(){return T(this,null,function*(){this.fetchUserPlaylists()})}deletePlaylist(t){return T(this,null,function*(){let n=yield this.userService.deletePlaylist(t);this.toastService.add({severity:"success",summary:"Success",detail:"Playlist deleted successfully"}),this.closeSidebar()})}closeSidebar(){console.log("close sidebar"),this.modPlaylist=void 0,this.sidebarVisible=!1,this.splitPlaylistSidebarVisible=!1,this.fetchUserPlaylists()}};s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=x({type:s,selectors:[["app-playlist-card"]],standalone:!0,features:[Y],decls:6,vars:3,consts:[[1,"flex","flex-wrap","justify-items-start","mt-4"],[1,"max-w-80","overflow-hidden","rounded-md","m-4","shadow-card"],["styleClass","p-sidebar-md","position","right",3,"visibleChange","visible"],[1,""],[3,"playlist","showSplitPlaylistSidebar"],[3,"routerLink"],["width","300px","alt","",1,"border-b",3,"src"],[1,"m-2","flex","justify-between"],[1,"text-lg","font-semibold","leading-none","m-0","truncate"],[1,"pi","pi-ellipsis-v","cursor-pointer",2,"font-size","1rem",3,"click"],[1,"relative"],[1,"absolute","flex","h-80","w-full","items-end","bg-black","opacity-60"],[1,"absolute","flex","h-80","w-full","items-end","p-4","text-white"],[1,"mb-2","text-2xl","font-bold","tracking-wider"],["alt","","srcset","",1,"h-80","w-full","object-cover",3,"src"],[1,"px-4"],[1,"text-2xl","font-bold","pt-4","pb-2"],[1,"mx-4"],[1,"cursor-pointer","pl-4","py-2","text-lg","hover:text-purple-600",3,"click"],[3,"showSplitPlaylistSidebarChange","onClose","playlist","showSplitPlaylistSidebar"]],template:function(n,a){n&1&&(o(0,"div",0),Ve(1,Wt,7,5,"div",1,Le),o(3,"p-sidebar",2),L("visibleChange",function(d){return M(a.sidebarVisible,d)||(a.sidebarVisible=d),d}),b(4,Qt,28,4,"div",3),r(),b(5,Ut,1,2,"app-playlist-split",4),r()),n&2&&(l(),De(a.userPlaylists==null?null:a.userPlaylists.items),l(2),E("visible",a.sidebarVisible),l(),me(a.modPlaylist?4:-1),l(),me(a.splitPlaylistSidebarVisible&&a.modPlaylist?5:-1))},dependencies:[st,Ue,de,le,dt],encapsulation:2});let i=s;return i})();export{Yi as PlayListCardComponent};
