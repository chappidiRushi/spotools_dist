import{a as nt}from"./chunk-BMTUOSSM.js";import{a as at,b as ot,e as he,f as be,g as lt,h as st,i as rt,j as dt,k as pt,l as ct,m as mt,n as ut,o as ft}from"./chunk-YS6UA7XC.js";import{b as J,c as Le,d as fe}from"./chunk-N3KHGMIE.js";import{$ as tt,C as me,E as ue,F as B,G as O,K as $e,L as Te,N as Pe,P as Ie,Q as Ee,S as Me,Y as G,_ as et,b as qe,d as de,f as pe,g as ce,h as Ye,i as N,r as Ke,v as Je,y as $}from"./chunk-4RLKZL7N.js";import{Ab as Qe,Bb as q,Cb as Y,Db as K,Eb as m,Fb as ae,Gb as E,Ib as k,Jb as T,Kb as P,Lb as oe,Ma as Ce,Mb as W,Ob as le,Pb as Ue,Qa as r,Qb as ke,Ra as S,Rb as He,T as je,Tb as Xe,U as Ae,V,Va as We,Yb as Ze,_ as D,_a as ve,ab as te,ca as C,da as F,db as f,dc as se,e as I,eb as y,f as Be,fb as p,ic as M,jb as j,jc as re,kb as A,kc as ze,la as h,lb as Ge,ma as b,mb as ie,nb as ne,ob as l,pb as s,pc as Ve,qa as Re,qb as w,qc as it,rb as Se,sa as ge,sb as we,tb as R,ua as v,ub as x,vb as _,wb as c,xb as Z,yb as z,zb as xe}from"./chunk-DNTZKGKC.js";var ht=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=V({imports:[N,O]})}return t})();var wt=["*"],xt=(t,o,e,i,n,a)=>({"p-sidebar":!0,"p-sidebar-active":t,"p-sidebar-left":o,"p-sidebar-right":e,"p-sidebar-top":i,"p-sidebar-bottom":n,"p-sidebar-full":a}),kt=(t,o)=>({transform:t,transition:o}),Tt=t=>({value:"visible",params:t});function Pt(t,o){t&1&&R(0)}function It(t,o){if(t&1&&(Se(0),f(1,Pt,1,0,"ng-container",5),we()),t&2){let e=c(2);r(),p("ngTemplateOutlet",e.headlessTemplate)}}function Et(t,o){t&1&&R(0)}function Mt(t,o){t&1&&w(0,"TimesIcon",13),t&2&&(p("styleClass","p-sidebar-close-icon"),y("data-pc-section","closeicon"))}function Lt(t,o){}function Vt(t,o){t&1&&f(0,Lt,0,0,"ng-template")}function Dt(t,o){if(t&1&&(l(0,"span",14),f(1,Vt,1,0,null,5),s()),t&2){let e=c(4);y("data-pc-section","closeicon"),r(),p("ngTemplateOutlet",e.closeIconTemplate)}}function Ft(t,o){if(t&1){let e=x();l(0,"button",10),_("click",function(n){h(e);let a=c(3);return b(a.close(n))})("keydown.enter",function(n){h(e);let a=c(3);return b(a.close(n))}),f(1,Mt,1,2,"TimesIcon",11)(2,Dt,2,2,"span",12),s()}if(t&2){let e=c(3);y("aria-label",e.ariaCloseLabel)("data-pc-section","closebutton")("data-pc-group-section","iconcontainer"),r(),p("ngIf",!e.closeIconTemplate),r(),p("ngIf",e.closeIconTemplate)}}function Nt(t,o){t&1&&R(0)}function Ot(t,o){t&1&&R(0)}function Bt(t,o){if(t&1&&(Se(0),l(1,"div",15),f(2,Ot,1,0,"ng-container",5),s(),we()),t&2){let e=c(3);r(),y("data-pc-section","footer"),r(),p("ngTemplateOutlet",e.footerTemplate)}}function jt(t,o){if(t&1&&(l(0,"div",6),f(1,Et,1,0,"ng-container",5)(2,Ft,3,5,"button",7),s(),l(3,"div",8),z(4),f(5,Nt,1,0,"ng-container",5),s(),f(6,Bt,3,2,"ng-container",9)),t&2){let e=c(2);y("data-pc-section","header"),r(),p("ngTemplateOutlet",e.headerTemplate),r(),p("ngIf",e.showCloseIcon),r(),y("data-pc-section","content"),r(2),p("ngTemplateOutlet",e.contentTemplate),r(),p("ngIf",e.footerTemplate)}}function At(t,o){if(t&1){let e=x();l(0,"div",3,0),_("@panelState.start",function(n){h(e);let a=c();return b(a.onAnimationStart(n))})("@panelState.done",function(n){h(e);let a=c();return b(a.onAnimationEnd(n))})("keydown",function(n){h(e);let a=c();return b(a.onKeyDown(n))}),f(2,It,2,1,"ng-container",4)(3,jt,7,6,"ng-template",null,1,Ze),s()}if(t&2){let e=K(4),i=c();j(i.styleClass),p("ngClass",Xe(9,xt,i.visible,i.position==="left"&&!i.fullScreen,i.position==="right"&&!i.fullScreen,i.position==="top"&&!i.fullScreen,i.position==="bottom"&&!i.fullScreen,i.fullScreen))("@panelState",le(19,Tt,Ue(16,kt,i.transformOptions,i.transitionOptions)))("ngStyle",i.style),y("data-pc-name","sidebar")("data-pc-section","root"),r(2),p("ngIf",i.headlessTemplate)("ngIfElse",e)}}var Rt=Ee([Pe({transform:"{{transform}}",opacity:0}),Te("{{transition}}")]),Wt=Ee([Te("{{transition}}",Pe({transform:"{{transform}}",opacity:0}))]),U=(()=>{class t{document;el;renderer;cd;config;appendTo;blockScroll=!1;style;styleClass;ariaCloseLabel;autoZIndex=!0;baseZIndex=0;modal=!0;dismissible=!0;showCloseIcon=!0;closeOnEscape=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";get visible(){return this._visible}set visible(e){this._visible=e}get position(){return this._position}set position(e){switch(this._position=e,e){case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break}}get fullScreen(){return this._fullScreen}set fullScreen(e){this._fullScreen=e,e&&(this.transformOptions="none")}templates;onShow=new v;onHide=new v;visibleChange=new v;initialized;_visible;_position="left";_fullScreen=!1;container;transformOptions="translate3d(-100%, 0px, 0px)";mask;maskClickListener;documentEscapeListener;animationEndListener;contentTemplate;headerTemplate;footerTemplate;closeIconTemplate;headlessTemplate;constructor(e,i,n,a,u){this.document=e,this.el=i,this.renderer=n,this.cd=a,this.config=u}ngAfterViewInit(){this.initialized=!0}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"headless":this.headlessTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}onKeyDown(e){e.code==="Escape"&&this.hide(!1)}show(){this.autoZIndex&&$.set("modal",this.container,this.baseZIndex||this.config.zIndex.modal),this.modal&&this.enableModality(),this.onShow.emit({}),this.visibleChange.emit(!0)}hide(e=!0){e&&this.onHide.emit({}),this.modal&&this.disableModality()}close(e){this.hide(),this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.mask||(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(this.container.style.zIndex)-1)),G.addMultipleClasses(this.mask,"p-component-overlay p-sidebar-mask p-component-overlay p-component-overlay-enter"),this.dismissible&&(this.maskClickListener=this.renderer.listen(this.mask,"click",e=>{this.dismissible&&this.close(e)})),this.renderer.appendChild(this.document.body,this.mask),this.blockScroll&&G.blockBodyScroll())}disableModality(){this.mask&&(G.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyModal.bind(this)))}destroyModal(){this.unbindMaskClickListener(),this.mask&&this.renderer.removeChild(this.document.body,this.mask),this.blockScroll&&G.unblockBodyScroll(),this.unbindAnimationEndListener(),this.mask=null}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.appendContainer(),this.show(),this.closeOnEscape&&this.bindDocumentEscapeListener();break}}onAnimationEnd(e){switch(e.toState){case"void":this.hide(!1),$.clear(this.container),this.unbindGlobalListeners();break}}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):G.appendChild(this.container,this.appendTo))}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentEscapeListener=this.renderer.listen(e,"keydown",i=>{i.which==27&&parseInt(this.container.style.zIndex)===$.get(this.container)&&this.close(i)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindGlobalListeners(){this.unbindMaskClickListener(),this.unbindDocumentEscapeListener()}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}ngOnDestroy(){this.initialized=!1,this.visible&&this.modal&&this.destroyModal(),this.appendTo&&this.container&&this.renderer.appendChild(this.el.nativeElement,this.container),this.container&&this.autoZIndex&&$.clear(this.container),this.container=null,this.unbindGlobalListeners(),this.unbindAnimationEndListener()}static \u0275fac=function(i){return new(i||t)(S(qe),S(ge),S(We),S(se),S(ue))};static \u0275cmp=C({type:t,selectors:[["p-sidebar"]],contentQueries:function(i,n,a){if(i&1&&xe(a,B,4),i&2){let u;q(u=Y())&&(n.templates=u)}},hostAttrs:[1,"p-element"],inputs:{appendTo:"appendTo",blockScroll:[2,"blockScroll","blockScroll",M],style:"style",styleClass:"styleClass",ariaCloseLabel:"ariaCloseLabel",autoZIndex:[2,"autoZIndex","autoZIndex",M],baseZIndex:[2,"baseZIndex","baseZIndex",re],modal:[2,"modal","modal",M],dismissible:[2,"dismissible","dismissible",M],showCloseIcon:[2,"showCloseIcon","showCloseIcon",M],closeOnEscape:[2,"closeOnEscape","closeOnEscape",M],transitionOptions:"transitionOptions",visible:"visible",position:"position",fullScreen:"fullScreen"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange"},features:[te],ngContentSelectors:wt,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["role","complementary",3,"ngClass","ngStyle","class","keydown",4,"ngIf"],["role","complementary",3,"keydown","ngClass","ngStyle"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"p-sidebar-header"],["type","button","class","p-sidebar-close p-sidebar-icon p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[1,"p-sidebar-content"],[4,"ngIf"],["type","button","pRipple","",1,"p-sidebar-close","p-sidebar-icon","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-sidebar-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-sidebar-close-icon"],[1,"p-sidebar-footer"]],template:function(i,n){i&1&&(Z(),f(0,At,5,21,"div",2)),i&2&&p("ngIf",n.visible)},dependencies:()=>[de,pe,Ye,ce,et,Le],styles:[`@layer primeng{.p-sidebar{position:fixed;transition:transform .3s;display:flex;flex-direction:column}.p-sidebar-content{position:relative;overflow-y:auto;flex-grow:1}.p-sidebar-header{display:flex;align-items:center}.p-sidebar-footer{margin-top:auto}.p-sidebar-icon{display:flex;align-items:center;justify-content:center;margin-left:auto}.p-sidebar-left{top:0;left:0;width:20rem;height:100%}.p-sidebar-right{top:0;right:0;width:20rem;height:100%}.p-sidebar-top{top:0;left:0;width:100%;height:10rem}.p-sidebar-bottom{bottom:0;left:0;width:100%;height:10rem}.p-sidebar-full{width:100%;height:100%;top:0;left:0;-webkit-transition:none;transition:none}.p-sidebar-left.p-sidebar-sm,.p-sidebar-right.p-sidebar-sm{width:20rem}.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-md{width:40rem}.p-sidebar-left.p-sidebar-lg,.p-sidebar-right.p-sidebar-lg{width:60rem}.p-sidebar-top.p-sidebar-sm,.p-sidebar-bottom.p-sidebar-sm{height:10rem}.p-sidebar-top.p-sidebar-md,.p-sidebar-bottom.p-sidebar-md{height:20rem}.p-sidebar-top.p-sidebar-lg,.p-sidebar-bottom.p-sidebar-lg{height:30rem}@media screen and (max-width: 64em){.p-sidebar-left.p-sidebar-lg,.p-sidebar-left.p-sidebar-md,.p-sidebar-right.p-sidebar-lg,.p-sidebar-right.p-sidebar-md{width:20rem}}}
`],encapsulation:2,data:{animation:[$e("panelState",[Ie("void => visible",[Me(Rt)]),Ie("visible => void",[Me(Wt)])])]},changeDetection:0})}return t})(),H=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=V({imports:[N,tt,O,Le,O]})}return t})();var Gt=["*"],bt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=C({type:t,selectors:[["p-floatLabel"]],ngContentSelectors:Gt,decls:2,vars:0,consts:[[1,"p-float-label"]],template:function(i,n){i&1&&(Z(),l(0,"span",0),z(1),s())},encapsulation:2,changeDetection:0})}return t})(),_t=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=V({imports:[N,O,Je,O]})}return t})();var Ut=["input"],Ht=(t,o,e,i)=>({"p-radiobutton p-component":!0,"p-radiobutton-checked":t,"p-radiobutton-disabled":o,"p-radiobutton-focused":e,"p-variant-filled":i}),Xt=(t,o,e)=>({"p-radiobutton-box":!0,"p-highlight":t,"p-disabled":o,"p-focus":e}),Zt=(t,o,e)=>({"p-radiobutton-label":!0,"p-radiobutton-label-active":t,"p-disabled":o,"p-radiobutton-label-focus":e});function zt(t,o){if(t&1){let e=x();l(0,"label",7),_("click",function(n){h(e);let a=c();return b(a.select(n))}),m(1),s()}if(t&2){let e=c(),i=K(3);j(e.labelStyleClass),p("ngClass",ke(6,Zt,i.checked,e.disabled,e.focused)),y("for",e.inputId)("data-pc-section","label"),r(),ae(e.label)}}var qt={provide:lt,useExisting:je(()=>Ne),multi:!0},Yt=(()=>{class t{accessors=[];add(e,i){this.accessors.push([e,i])}remove(e){this.accessors=this.accessors.filter(i=>i[1]!==e)}select(e){this.accessors.forEach(i=>{this.isSameGroup(i,e)&&i[1]!==e&&i[1].writeValue(e.value)})}isSameGroup(e,i){return e[0].control?e[0].control.root===i.control.control.root&&e[1].name===i.name:!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ne=(()=>{class t{cd;injector;registry;config;value;formControlName;name;disabled;label;variant="outlined";tabindex;inputId;ariaLabelledBy;ariaLabel;style;styleClass;labelStyleClass;autofocus;onClick=new v;onFocus=new v;onBlur=new v;inputViewChild;onModelChange=()=>{};onModelTouched=()=>{};checked;focused;control;constructor(e,i,n,a){this.cd=e,this.injector=i,this.registry=n,this.config=a}ngOnInit(){this.control=this.injector.get(st),this.checkName(),this.registry.add(this.control,this)}handleClick(e,i,n){e.preventDefault(),!this.disabled&&(this.select(e),n&&i.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit({originalEvent:e,value:this.value}))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error(`
          If you define both a name and a formControlName attribute on your radio button, their values
          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>
        `)}static \u0275fac=function(i){return new(i||t)(S(se),S(Re),S(Yt),S(ue))};static \u0275cmp=C({type:t,selectors:[["p-radioButton"]],viewQuery:function(i,n){if(i&1&&Qe(Ut,5),i&2){let a;q(a=Y())&&(n.inputViewChild=a.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:[2,"disabled","disabled",M],label:"label",variant:"variant",tabindex:[2,"tabindex","tabindex",re],inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",autofocus:[2,"autofocus","autofocus",M]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[oe([qt]),te],decls:7,vars:31,consts:[["input",""],[3,"click","ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio","pAutoFocus","",3,"focus","blur","checked","disabled","value","autofocus"],[3,"ngClass"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"],[3,"click","ngClass"]],template:function(i,n){if(i&1){let a=x();l(0,"div",1),_("click",function(d){h(a);let g=K(3);return b(n.handleClick(d,g,!0))}),l(1,"div",2)(2,"input",3,0),_("focus",function(d){return h(a),b(n.onInputFocus(d))})("blur",function(d){return h(a),b(n.onInputBlur(d))}),s()(),l(4,"div",4),w(5,"span",5),s()(),f(6,zt,2,10,"label",6)}i&2&&(j(n.styleClass),p("ngStyle",n.style)("ngClass",He(22,Ht,n.checked,n.disabled,n.focused,n.variant==="filled"||n.config.inputStyle()==="filled")),y("data-pc-name","radiobutton")("data-pc-section","root"),r(),y("data-pc-section","hiddenInputWrapper"),r(),p("checked",n.checked)("disabled",n.disabled)("value",n.value)("autofocus",n.autofocus),y("id",n.inputId)("name",n.name)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("tabindex",n.tabindex)("aria-checked",n.checked)("data-pc-section","hiddenInput"),r(2),p("ngClass",ke(27,Xt,n.checked,n.disabled,n.focused)),y("data-pc-section","input"),r(),y("data-pc-section","icon"),r(),p("ngIf",n.label))},dependencies:[de,pe,ce,at],encapsulation:2,changeDetection:0})}return t})(),_e=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=V({imports:[N,ot]})}return t})();var $t=(t,o)=>o.uuid;function ei(t,o){t&1&&(l(0,"div",8),m(1,"SPLIT PLAYLIST"),s(),w(2,"div"))}function ti(t,o){if(t&1&&(l(0,"div",6)(1,"label",9)(2,"span",10),m(3),s(),l(4,"span",11),m(5),s()()()),t&2){let e=o.$implicit;r(),p("for",e.genre),r(2),ae(e.genre),r(2),E("(",e.items.length,")")}}function ii(t,o){t&1&&w(0,"div")}function ni(t,o){if(t&1&&(w(0,"p-button",12),f(1,ii,1,0,"div")),t&2){let e=c();p("classList","fullWidthBtn")("disabled",!e.selectedGenre),r(),A(e.selectedGenre?1:-1)}}var yt=(()=>{let o=class o{constructor(){this.showSidebar=!0,this.showSidebarChange=new v,this.selectedGenre="",this.searchedText=ve(""),this.genreMap=ve([]),this.filteredGenreMap=ze(()=>{let i=this.searchedText();return this.genreMap().filter(n=>n.genre.includes(i))}),this.spotify=D(fe)}ngOnInit(){return I(this,null,function*(){J().set(!0);try{if(!this.playlist.tracks?.total)throw new Error("there are no tracks available");let i=yield this.spotify.getAllPlaylistItems(this.playlist.id,this.playlist.tracks?.total),n={};i.forEach(g=>{g.track.artists.forEach(L=>{n[L.id]||(n[L.id]=[]),n[L.id].push(g.track.id)})});let a=yield this.spotify.getArtists(Object.keys(n)),u={},d=[];a.forEach(g=>{g.genres.forEach(L=>{let X=n[g.id];u[L]?u[L].push(...X):u[L]=X})}),Object.keys(u).forEach(g=>{d.push({uuid:Math.random().toString(),genre:g,items:it(u[g])})}),this.genreMap.set(d)}catch(i){console.error("\u{1F680} ~ file: genre.component.ts:77 ~ GenreComponent ~ ngOnInit ~ error:",i)}finally{J().set(!1)}})}searched(i){i.preventDefault();let n=i.target;this.searchedText.set(n.value)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=C({type:o,selectors:[["app-genre"]],inputs:{playlist:"playlist",showSidebar:"showSidebar"},outputs:{showSidebarChange:"showSidebarChange"},standalone:!0,features:[oe([]),W],decls:12,vars:1,consts:[["styleClass","p-sidebar-md","title","Split Playlist","position","right",1,"no-sidebar-shadow",3,"visibleChange","onHide","visible"],["pTemplate","header"],[1,"px-5","h-full"],[1,"pt-5","pb-2"],["type","text","pInputText","",1,"w-full",3,"keydown"],["for","username"],[1,"cursor-pointer","hover:text-purple-600","hover:bg-gray-500","mb-1","flex","py-1","ng-star-inserted","bg-gray-100","rounded-md","pl-3"],["pTemplate","footer"],[1,"font-semibold","text-2xl"],[1,"ml-2",3,"for"],[1,"text-2xl","cursor-pointer"],[1,"text-xl","text-gray-500","pl-3"],["label","Create Playlist","icon","pi pi-check",1,"text-2xl","w-full",3,"classList","disabled"]],template:function(n,a){n&1&&(l(0,"p-sidebar",0),P("visibleChange",function(d){return T(a.showSidebar,d)||(a.showSidebar=d),d}),_("onHide",function(){return a.showSidebarChange.emit(!1)}),f(1,ei,3,0,"ng-template",1),l(2,"div",2)(3,"div",3)(4,"p-floatLabel")(5,"input",4),_("keydown",function(d){return a.searched(d)}),s(),l(6,"label",5),m(7,"Username"),s()()(),l(8,"div"),ie(9,ti,6,3,"div",6,$t),s()(),f(11,ni,2,3,"ng-template",7),s()),n&2&&(k("visible",a.showSidebar),r(9),ne(a.filteredGenreMap()))},dependencies:[H,U,B,_e,be,he,mt,ct,_t,bt],encapsulation:2,changeDetection:0});let t=o;return t})();function ai(t,o){t&1&&(l(0,"div",17),m(1,"SPLIT PLAYLIST"),s())}var gt=(()=>{let o=class o{constructor(){this.userService=D(nt),this.toastService=D(me),this.splitCount=1,this.loading=!1,this.showSplitPlaylistSidebar=!1,this.showSplitPlaylistSidebarChange=new v,this.exit=new v,this.splitMode="dividePlayListIntoXParts"}splitPlaylist(){return I(this,null,function*(){try{this.loading=!0;let d=this.playlist.tracks?.total||0;if(!d)throw new Error("No Tracks In playlist to Split");let g=yield this.userService.fetchAllTracks(this.playlist.id,d);if(this.splitMode==="dividePlayListIntoXParts"){let L=Math.ceil(d/this.splitCount),X=Ve(g,L);for(let ee=0;ee<X.length;ee++){let Oe=yield this.userService.createPlaylist(`${this.playlist.name} - splitted #${ee+1}`);if(!Oe)throw new Error("no new playlist");let Ct=X[ee].map(ye=>ye.track?.uri),vt=Ve(Ct,100);try{for(var i=Be(vt),n,a,u;n=!(a=yield i.next()).done;n=!1){let ye=a.value;yield this.userService.addTracksToPlaylist(Oe.id,ye)}}catch{u=[a]}finally{try{n&&(a=i.return)&&(yield a.call(i))}finally{if(u)throw u[0]}}}}this.toastService.add({severity:"success",summary:"Success",detail:"Playlist splitted successfully"}),this.exit.emit(),this.loading=!1}catch(d){let g="Failed To Split Playlist";d instanceof Error&&(g=d.message),console.error("creating spotify playlist error",d),this.toastService.add({severity:"danger",summary:"Failed",detail:g}),this.exit.emit()}})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=C({type:o,selectors:[["app-playlist-split"]],inputs:{playlist:"playlist",showSplitPlaylistSidebar:"showSplitPlaylistSidebar"},outputs:{showSplitPlaylistSidebarChange:"showSplitPlaylistSidebarChange",exit:"exit"},standalone:!0,features:[W],decls:22,vars:6,consts:[["styleClass","p-sidebar-md","title","Split Playlist","position","right",1,"no-sidebar-shadow",3,"visibleChange","onHide","visible"],["pTemplate","header"],[1,"px-5","h-full"],[1,"text-lg","font-semibold"],[1,"block","font-bold","text-gray-600","dark:text-gray-300","mt-4"],[1,"flex","flex-col","ml-4"],[1,"flex","py-3","align-middle"],["name","dividePlayListIntoXParts","value","dividePlayListIntoXParts","inputId","dividePlayListIntoXParts",3,"ngModelChange","ngModel"],["for","dividePlayListIntoXParts",1,"ml-2"],[1,"flex","py-3"],["name","createPlayListWithXSongs","value","createPlayListWithXSongs","disabled","true","inputId","createPlayListWithXSongs",3,"ngModelChange","ngModel"],["for","createPlayListWithXSongs",1,"ml-2"],[1,""],["for","minmax",1,"block","pb-3"],["inputId","minmax","mode","decimal","min","0","max","100",3,"ngModelChange","ngModel"],[1,"flex","flex-row-reverse","mt-4"],["label","Split Playlist","icon","pi pi-check",1,"text-2xl",3,"onClick","loading"],[1,"font-semibold","text-2xl"]],template:function(n,a){n&1&&(l(0,"p-sidebar",0),P("visibleChange",function(d){return T(a.showSplitPlaylistSidebar,d)||(a.showSplitPlaylistSidebar=d),d}),_("onHide",function(){return a.showSplitPlaylistSidebarChange.emit(!1)}),f(1,ai,2,0,"ng-template",1),l(2,"div",2)(3,"p",3),m(4," Split the playlist onto many parts. The original playlist won't be modified or deleted. "),s(),l(5,"span",4),m(6," Split type: "),s(),l(7,"div",5)(8,"div",6)(9,"p-radioButton",7),P("ngModelChange",function(d){return T(a.splitMode,d)||(a.splitMode=d),d}),s(),l(10,"label",8),m(11," Divide Playlist into X parts "),s()(),l(12,"div",9)(13,"p-radioButton",10),P("ngModelChange",function(d){return T(a.splitMode,d)||(a.splitMode=d),d}),s(),l(14,"label",11),m(15," Create Playlist with X songs each "),s()()(),l(16,"div",12)(17,"label",13),m(18),s(),l(19,"p-inputNumber",14),P("ngModelChange",function(d){return T(a.splitCount,d)||(a.splitCount=d),d}),s()(),l(20,"div",15)(21,"p-button",16),_("onClick",function(){return a.splitPlaylist()}),s()()()()),n&2&&(k("visible",a.showSplitPlaylistSidebar),r(9),k("ngModel",a.splitMode),r(4),k("ngModel",a.splitMode),r(5),E(" ",a.splitMode==="createPlayListWithXSongs"?"Number of songs":"Number of parts",""),r(),k("ngModel",a.splitCount),r(2),p("loading",a.loading))},dependencies:[H,U,B,_e,Ne,pt,rt,dt,ft,ut,be,he],encapsulation:2});let t=o;return t})();var oi=t=>["/home/playlist",t];function li(t,o){if(t&1){let e=x();l(0,"div",1)(1,"a",6),w(2,"img",7),s(),l(3,"div",8)(4,"p",9),m(5),s(),l(6,"i",10),_("click",function(){let n=h(e).$implicit,a=c();return a.setUpdateItem(n),b(a.sidebarVisible=!0)}),s()()()}if(t&2){let e=o.$implicit;r(),p("routerLink",le(3,oi,e.id)),r(),p("src",e.images&&e.images.length?e.images[0].url:"https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png",Ce),r(3),E(" ",e.name," ")}}function si(t,o){if(t&1){let e=x();l(0,"div",3)(1,"div",11),w(2,"div",12),l(3,"div",13)(4,"div")(5,"h2",14),m(6),s(),l(7,"p")(8,"strong"),m(9,"Made by"),s(),m(10),s(),l(11,"p")(12,"strong"),m(13,"With"),s(),m(14),s()()(),w(15,"img",15),s(),l(16,"div",16)(17,"div",17),m(18,"Creation Tools"),s(),l(19,"div",18)(20,"div",19),_("click",function(){h(e);let n=c();return b(n.splitPlaylistSidebarVisible=!0)}),m(21," Split Playlist "),s(),l(22,"div",19),_("click",function(){h(e);let n=c();return b(n.deletePlaylist(n.modPlaylist))}),m(23," Delete Playlist "),s(),l(24,"div",19),_("click",function(){h(e);let n=c();return b(n.clonePlaylist(n.modPlaylist.id,(n.modPlaylist.tracks==null?null:n.modPlaylist.tracks.total)||0,n.modPlaylist.name))}),m(25," Clone Playlist "),s(),l(26,"div",19),_("click",function(){h(e);let n=c();return b(n.deleteDuplicates(n.modPlaylist.id,(n.modPlaylist.tracks==null?null:n.modPlaylist.tracks.total)||0,n.modPlaylist.name))}),m(27," Delete Duplicates "),s(),l(28,"div",19),_("click",function(){h(e);let n=c();return b(n.filteredGenre(n.modPlaylist))}),m(29," Filtered Genre "),s()()()()}if(t&2){let e=c();r(6),E(" ",e.modPlaylist.name," "),r(4),E(" ",e.modPlaylist.owner.display_name," "),r(4),E(" ",(e.modPlaylist.tracks==null?null:e.modPlaylist.tracks.total)||0," items"),r(),p("src",e.modPlaylist.images&&e.modPlaylist.images.length?e.modPlaylist.images[0].url:"https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png",Ce)}}function ri(t,o){if(t&1){let e=x();l(0,"app-playlist-split",20),P("showSplitPlaylistSidebarChange",function(n){h(e);let a=c();return T(a.splitPlaylistSidebarVisible,n)||(a.splitPlaylistSidebarVisible=n),b(n)}),_("onClose",function(){h(e);let n=c();return b(n.closeSidebar())}),s()}if(t&2){let e=c();p("playlist",e.modPlaylist),k("showSplitPlaylistSidebar",e.splitPlaylistSidebarVisible)}}function di(t,o){if(t&1){let e=x();l(0,"app-genre",21),P("showSidebarChange",function(n){h(e);let a=c();return T(a.genreSidebar,n)||(a.genreSidebar=n),b(n)}),s()}if(t&2){let e=c();p("playlist",e.modPlaylist),k("showSidebar",e.genreSidebar)}}var On=(()=>{let o=class o{constructor(){this.splitPlaylistSidebarVisible=!1,this.toastService=D(me),this.userPlaylists=[],this.spotify=D(fe),this.sidebarVisible=!1,this.genreSidebar=!1,this.showSpinner=J()}closeGenre(){throw new Error("Method not implemented.")}fetchUserPlaylists(){return I(this,null,function*(){this.showSpinner.set(!0);let i=yield this.spotify.fetchMyPlaylists();console.log(i),this.userPlaylists=i.items,this.showSpinner.set(!1)})}setUpdateItem(i){this.modPlaylist=i}clonePlaylist(i,n,a){return I(this,null,function*(){console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistName:",a),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ totalTracks:",n),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistId:",i)})}deleteDuplicates(i,n,a){return I(this,null,function*(){console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistName:",a),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ totalTracks:",n),console.log("\u{1F680} ~ file: playlist-card.component.ts:47 ~ PlayListCardComponent ~ clonePlaylist ~ playlistId:",i)})}ngOnInit(){return I(this,null,function*(){this.fetchUserPlaylists()})}deletePlaylist(i){return I(this,null,function*(){let n=yield this.spotify.getUser();if(i.owner.id!==n?.id)return this.toastService.add({severity:"error",summary:"Error",detail:"You are no the owner of this playlist"});this.spotify.deletePlaylist(i.id),this.toastService.add({severity:"success",summary:"Success",detail:"Playlist deleted successfully"}),this.closeSidebar()})}closeSidebar(){this.modPlaylist=void 0,this.sidebarVisible=!1,this.splitPlaylistSidebarVisible=!1,this.fetchUserPlaylists()}filteredGenre(i){this.modPlaylist=i,this.genreSidebar=!0}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=C({type:o,selectors:[["app-playlist-card"]],standalone:!0,features:[W],decls:7,vars:4,consts:[[1,"flex","flex-wrap","justify-items-start","mt-4"],[1,"max-w-80","overflow-hidden","rounded-md","m-4","shadow-card"],["styleClass","p-sidebar-md","position","right",3,"visibleChange","visible"],[1,""],[3,"playlist","showSplitPlaylistSidebar"],[3,"playlist","showSidebar"],[3,"routerLink"],["width","300px","alt","",1,"border-b",3,"src"],[1,"m-2","flex","justify-between"],[1,"text-lg","font-semibold","leading-none","m-0","truncate"],[1,"pi","pi-ellipsis-v","cursor-pointer",2,"font-size","1rem",3,"click"],[1,"relative"],[1,"absolute","flex","h-80","w-full","items-end","bg-black","opacity-60"],[1,"absolute","flex","h-80","w-full","items-end","p-4","text-white"],[1,"mb-2","text-2xl","font-bold","tracking-wider"],["alt","","srcset","",1,"h-80","w-full","object-cover",3,"src"],[1,"px-4"],[1,"text-2xl","font-bold","pt-4","pb-2"],[1,"mx-4"],[1,"cursor-pointer","pl-4","py-2","text-lg","hover:text-purple-600",3,"click"],[3,"showSplitPlaylistSidebarChange","onClose","playlist","showSplitPlaylistSidebar"],[3,"showSidebarChange","playlist","showSidebar"]],template:function(n,a){n&1&&(l(0,"div",0),ie(1,li,7,5,"div",1,Ge),l(3,"p-sidebar",2),P("visibleChange",function(d){return T(a.sidebarVisible,d)||(a.sidebarVisible=d),d}),f(4,si,30,4,"div",3),s(),f(5,ri,1,2,"app-playlist-split",4)(6,di,1,2,"app-genre",5),s()),n&2&&(r(),ne(a.userPlaylists),r(2),k("visible",a.sidebarVisible),r(),A(a.modPlaylist?4:-1),r(),A(a.splitPlaylistSidebarVisible&&a.modPlaylist?5:-1),r(),A(a.genreSidebar&&a.modPlaylist?6:-1))},dependencies:[ht,Ke,H,U,gt,yt]});let t=o;return t})();export{On as PlayListCardComponent};
